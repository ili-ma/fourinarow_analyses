<!DOCTYPE html>
<html lang="en">
	<head>
	<meta charset = "utf-8">
	<meta http-equiv = "X-UA-Compatible" content = "IE=edge">
	<meta name="viewport" content="width=device-width">
	
	<script src="../static/lib/jquery-min.js"></script>
	<script src="../static/lib/jquery-ui.min.js"></script>
	<script src="../static/lib/bootstrap.min.js"></script>
	<script src="../static/lib/underscore-min.js"></script>
	<script src="../static/lib/backbone-min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<script src="../static/js/psiturk.js"></script>

	<script type="text/javascript">
		// These fields provided by the psiTurk Server
		const uniqueId = "{{ uniqueId }}";  // a unique string identifying the worker/task
		const condition = {{ condition }}; // the condition number
		const counterbalance = {{ counterbalance }}; // a number indexing counterbalancing conditions
		const adServerLoc = "{{ adServerLoc }}"; // the location of your ad (so you can send user back at end of experiment)
		const mode = "{{ mode }}";
	</script>

	<script src="../static/js/4inarow_base.js"></script>
	<script src="../static/js/4inarow_psiturk.js"></script>
	<script src="../static/scripts/Code/makemove.js"></script>
	
	<link href = "../static/css/lib/bootstrap-12/bootstrap.min.css" rel = "stylesheet">
	<link href = '../static/css/stylesheet.css' rel='stylesheet'>

	</head>
	<body>
		<div class="overlayed"></div>
		<div class="popup" id="instructions" style="display: flex; flex-direction: column;">
			<h4 style="font-size:4vh;">Instructions</h4>
			<div style="flex: 1; min-width: 0; min-height: 0;">
				<img src="" style="width:100%; height:100%; object-fit:contain;"></img>
			</div>
			<div style="height: 3em;">
				<button id="previousbutton" type="button" class="mybutton" style="left:43%;width:10%; transform: unset;" onclick="change_instruction(-1);">Previous</button>
				<button id="nextbutton" type="button" class="mybutton" style="left:57%;width:10%; transform: unset;" onclick="change_instruction(+1);">Next</button>
				<button id="blackbutton" type="button" class="mybutton" style="left:32.5%;width:10%; transform: unset;" onclick="answer('Black');">Black</button>
				<button id="noonebutton" type="button" class="mybutton" style="left:46.5%;width:10%; transform: unset;" onclick="answer('No-one');">No-one</button>
				<button id="whitebutton" type="button" class="mybutton" style="left:60.5%;width:10%; transform: unset;" onclick="answer('White');">White</button>
			</div>
		</div>
		<div class="popup" id="database_error">
            <div class="alert alert-danger">
                <h4 style="font-size:4vh;">Error!</h4>
            </div>
            <p> We couldn't contact the database. We will try <b>1</b> more times before attempting to submit your HIT without saving the data. </p>
            <div class="load-icon"></div>
        </div>
        <div class="popup" id="give_up">
            <div class="alert alert-danger">
                <h4 style="font-size:4vh;">Error!</h4>
            </div>
            <p> We couldn't save your data! Please contact <u><font color="blue">{{contact_address}}</font></u> to report the error. Then click the button below.</p>
            <button type="button" class="mybutton" id = "resubmit" style="bottom:8%;left:50%;width:15%">I reported the error</button>
        </div>
        <div class="popup" id="handle_error">
            <div class="alert alert-danger">
                <h4 style="font-size:4vh;">Error!</h4>
            </div>
            <p> The experiment encountered an error! <a>Click here</a> to report the error by email. Please describe at what point in the HIT the error occurred, and include the following:</p>
            <textarea disabled style="resize:none"></textarea>
            <p>Then click the button below to submit the HIT. If you have trouble submitting the HIT, please contact <u><font color="blue">{{contact_address}}</font></u></p>
            <button type="button" class="mybutton" id = "submit_hit" style="bottom:8%;left:50%;width:15%">submit HIT</button>
        </div>

		
		<div class='container-fluid text-center'>
			<div class="clickprompt">Please click where you want to play a piece.</div>
			<div class="row">
				<div class="col-xs-8 col-xs-offset-2 canvas-container">
					<div class="canvas"></div>
				</div>
			</div>
			<div class='row'>
				<div class="headertext col-xs-8 col-xs-offset-2">
					<div class="gamecount">Game</div>
					<h1>Your turn</h1>
				</div>
			</div>
			<div class='row'>
				<div class="col-xs-8 col-xs-offset-2">
					<button type="button" class="mybutton" id="nextgamebutton" style="display:none">Next game</button>
				</div>
			</div>
		</div>
	</body>
</html>
